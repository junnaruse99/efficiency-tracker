(this["webpackJsonpefficiency-tracker"]=this["webpackJsonpefficiency-tracker"]||[]).push([[0],{44:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a(1),n=a.n(c),s=a(16),o=a.n(s),l=(a(44),a(15)),i=a(5),u=a(13),j=a(2),p=a(7),d=Object(c.createContext)(),b=Object(c.createContext)(),m=function(e){var t=Object(c.useContext)(d),a=t.alert,n=t.showAlert,s=Object(c.useContext)(b),o=s.authenticate,i=s.messagge,m=s.logIn;Object(c.useEffect)((function(){o&&e.history.push("/projects"),i&&n(i.msg,i.category)}),[o,i,e.history]);var O=Object(c.useState)({email:"",password:""}),h=Object(p.a)(O,2),f=h[0],x=h[1],v=f.email,g=f.password,y=function(e){x(Object(j.a)(Object(j.a)({},f),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(r.jsxs)("div",{className:"form-usuario",children:[a?Object(r.jsx)("div",{className:"alerta ".concat(a.category),children:a.msg}):null,Object(r.jsxs)("div",{className:"contenedor-form sombra-dark",children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()&&""!==g.trim()||n("All fields are mandatory","alerta-error"),m({email:v,password:g})},children:[Object(r.jsxs)("div",{className:"campo-form",children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"Your email",value:v,onChange:y})]}),Object(r.jsxs)("div",{className:"campo-form",children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Your password",value:g,onChange:y})]}),Object(r.jsx)("div",{className:"campo-form",children:Object(r.jsx)("input",{type:"submit",className:"btn btn-primario btn-block",value:"Login"})})]}),Object(r.jsx)(l.b,{to:"/new-account",className:"enlace-cuenta",children:"Create an account"})]})]})},O=function(e){var t=Object(c.useContext)(d),a=t.alert,n=t.showAlert,s=Object(c.useContext)(b),o=s.authenticate,i=s.messagge,m=s.registerUser;Object(c.useEffect)((function(){o&&e.history.push("/projects"),i&&(console.log(i),n(i.msg,i.category))}),[o,i,e.history]);var O=Object(c.useState)({name:"",email:"",password:"",confirm:""}),h=Object(p.a)(O,2),f=h[0],x=h[1],v=f.name,g=f.email,y=f.password,k=f.confirm,w=function(e){x(Object(j.a)(Object(j.a)({},f),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(r.jsxs)("div",{className:"form-usuario",children:[a?Object(r.jsx)("div",{className:"alerta ".concat(a.category),children:a.msg}):null,Object(r.jsxs)("div",{className:"contenedor-form sombra-dark",children:[Object(r.jsx)("h1",{children:"Create an account"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()&&""!==g.trim()&&""!==y.trim()&&""!==k.trim()?y.length<6?n("Password must be at least 6 characters","alerta-error"):(y!==k&&n("Passwords are not the same","alerta-error"),m({name:v,email:g,password:y})):n("All fields are mandatory","alerta-error")},children:[Object(r.jsxs)("div",{className:"campo-form",children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"Your Name",value:v,onChange:w})]}),Object(r.jsxs)("div",{className:"campo-form",children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"Your email",value:g,onChange:w})]}),Object(r.jsxs)("div",{className:"campo-form",children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Your password",value:y,onChange:w})]}),Object(r.jsxs)("div",{className:"campo-form",children:[Object(r.jsx)("label",{htmlFor:"confirm",children:"Confirm Password"}),Object(r.jsx)("input",{type:"password",id:"confirm",name:"confirm",placeholder:"Confirm Password",value:k,onChange:w})]}),Object(r.jsx)("div",{className:"campo-form",children:Object(r.jsx)("input",{type:"submit",className:"btn btn-primario btn-block",value:"Register"})})]}),Object(r.jsx)(l.b,{to:"/",className:"enlace-cuenta",children:"Return to login"})]})]})},h=Object(c.createContext)(),f=function(){var e=Object(c.useContext)(h),t=e.form,a=e.errorform,n=e.showForm,s=e.addProject,o=e.showError,l=Object(c.useState)({name:""}),i=Object(p.a)(l,2),d=i[0],b=i[1],m=d.name;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){return n()},children:"Create a new project"}),t?Object(r.jsxs)("form",{className:"formulario-nuevo-proyecto",onSubmit:function(e){e.preventDefault(),""!==m.trim()?(o(!1),s(d),b({name:""})):o(!0)},children:[Object(r.jsx)("input",{type:"text",className:"input-text",placeholder:"Name of the project",name:"name",value:m,onChange:function(e){b(Object(j.a)(Object(j.a)({},d),{},Object(u.a)({},e.target.name,e.target.value)))}}),Object(r.jsx)("input",{type:"submit",className:"btn btn-primario btn-block",value:"Add new Project"})]}):null,a?Object(r.jsx)("p",{className:"mensaje error",children:"The name of the project is mandatory"}):null]})},x=Object(c.createContext)(),v=function(e){var t=e.project,a=Object(c.useContext)(h).actualProject,n=Object(c.useContext)(x).getTasks;return Object(r.jsx)("li",{children:Object(r.jsx)("button",{type:"button",className:"btn btn-blank",onClick:function(){return e=t._id,a(e),void n(e);var e},children:t.name})})},g=a(71),y=a(70),k=function(){var e=Object(c.useContext)(h),t=e.projects,a=e.messagge,n=e.getProjects,s=Object(c.useContext)(d),o=s.alert,l=s.showAlert;return Object(c.useEffect)((function(){a&&l(a.msg,a.category),n()}),[a]),0===t.length?Object(r.jsx)("p",{children:"Start creating a new project!"}):Object(r.jsxs)("ul",{className:"listado-proyectos",children:[o?Object(r.jsx)("div",{className:"alert {alert.category}",children:o.msg}):null,Object(r.jsx)(g.a,{children:t.map((function(e){return Object(r.jsx)(y.a,{timeout:200,className:"proyecto",children:Object(r.jsx)(v,{project:e})},e._id)}))})]})},w=function(){return Object(r.jsxs)("aside",{children:[Object(r.jsxs)("h1",{children:["MERN",Object(r.jsx)("span",{children:"Tasks"})]}),Object(r.jsx)(f,{}),Object(r.jsxs)("div",{className:"proyectos",children:[Object(r.jsx)("h2",{children:"Your Projects"}),Object(r.jsx)(k,{})]})]})},C=function(){var e=Object(c.useContext)(b),t=e.user,a=e.logOut;return Object(r.jsxs)("header",{className:"app-header",children:[t?Object(r.jsxs)("p",{className:"nombre-usuario",children:["Hello ",Object(r.jsx)("span",{children:t.name})]}):null,Object(r.jsx)("nav",{className:"nav-principal",children:Object(r.jsx)("button",{className:"btn btn-blank cerrar-sesion",onClick:a,children:"Log out"})})]})},N=function(){var e=Object(c.useContext)(h).project,t=Object(c.useContext)(x),a=t.errortask,n=t.selectedtask,s=t.addTask,o=t.validateTask,l=t.updateTask,i=Object(c.useState)({name:""}),d=Object(p.a)(i,2),b=d[0],m=d[1];Object(c.useEffect)((function(){n&&m(n)}),[n]);var O=b.name;if(!e)return null;return Object(r.jsxs)("div",{className:"formulario",children:[Object(r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==O.trim()?(o(!1),b.projectId=e._id,n?l(b):s(b),m({name:""})):o(!0)},children:[Object(r.jsx)("div",{className:"contenedor-input",children:Object(r.jsx)("input",{type:"text",className:"input-text",placeholder:"Task name ...",name:"name",value:O,onChange:function(e){m(Object(j.a)(Object(j.a)({},b),{},Object(u.a)({},e.target.name,e.target.value)))}})}),Object(r.jsx)("div",{className:"contenedor-input",children:Object(r.jsx)("input",{type:"submit",className:"btn btn-primario btn-submit btn-block",value:n?"Edit Task":"Add Task"})})]}),a?Object(r.jsx)("p",{className:"mensaje error",children:"The task name is mandatory"}):null]})},T=function(e){var t=e.task,a=Object(c.useContext)(x),n=a.deleteTask,s=a.updateTask,o=a.saveActualTask,l=function(e){e.state?e.state=!1:e.state=!0,s(e)};return Object(r.jsxs)("li",{className:"tarea sombre",children:[Object(r.jsx)("p",{children:t.name}),Object(r.jsx)("div",{className:"estado",children:t.state?Object(r.jsx)("button",{type:"button",className:"completo",onClick:function(){return l(t)},children:"Complete"}):Object(r.jsx)("button",{type:"button",className:"incompleto",onClick:function(){return l(t)},children:"Incomplete"})}),Object(r.jsxs)("div",{className:"acciones",children:[Object(r.jsx)("button",{type:"button",className:"btn btn-primario",onClick:function(){return o(t)},children:"Edit"}),Object(r.jsx)("button",{type:"button",className:"btn btn-secundario",onClick:function(){return n(t._id,t.projectId)},children:"Delete"})]})]})},E=function(){var e=Object(c.useContext)(h),t=e.project,a=e.deleteProject,n=Object(c.useContext)(x).projecttasks;return t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("h2",{children:["Project: ",t.name]}),Object(r.jsx)("ul",{className:"listado-tareas",children:0===n.length?Object(r.jsx)("li",{className:"tarea",children:Object(r.jsx)("p",{children:"There are no tasks"})}):Object(r.jsx)(g.a,{children:n.map((function(e){return Object(r.jsx)(y.a,{timeout:100,className:"tarea",children:Object(r.jsx)(T,{task:e})},e._id)}))})}),Object(r.jsx)("button",{type:"button",className:"btn btn-eliminar",onClick:function(){return a(t._id)},children:"Delete Project \xd7"})]}):Object(r.jsx)("h2",{children:"Select a project"})},_=function(){var e=Object(c.useContext)(b).authenticateUser;return Object(c.useEffect)((function(){e()}),[]),Object(r.jsxs)("div",{className:"contenedor-app",children:[Object(r.jsx)(w,{}),Object(r.jsxs)("div",{className:"seccion-principal",children:[Object(r.jsx)(C,{}),Object(r.jsxs)("main",{children:[Object(r.jsx)(N,{}),Object(r.jsx)("div",{className:"contenedor-tareas",children:Object(r.jsx)(E,{})})]})]})]})},S=a(4),R=a.n(S),P=a(11),A=a(20),I="FORM_PROJECT",D="GET_PROJECTS",L="ADD_PROJECT",F="VALIDATE_FORM",U="ACTUAL_PROJECT",K="DELETE_PROJECT",J="PROJECT_ERROR",G="TASK_PROJECT",Y="ADD_TASK",H="VALIDATE_TASK",M="DELETE_TASK",B="ACTUAL_TASK",W="MODIFY_TASK",V="SHOW_ALERT",q="HIDE_ALERT",z="SUCCESSFUL_REGISTRATION",Q="ERROR_REGISTRATION",X="GET_USER",Z="SUCCESSFUL_LOGIN",$="ERROR_LOGIN",ee="LOG_OUT",te=function(e,t){switch(t.type){case I:return Object(j.a)(Object(j.a)({},e),{},{form:!0});case D:return Object(j.a)(Object(j.a)({},e),{},{projects:t.payload});case L:return Object(j.a)(Object(j.a)({},e),{},{projects:[t.payload].concat(Object(A.a)(e.projects)),form:!1});case F:return Object(j.a)(Object(j.a)({},e),{},{errorform:t.payload});case U:return Object(j.a)(Object(j.a)({},e),{},{project:e.projects.filter((function(e){return e._id===t.payload}))[0]});case K:return Object(j.a)(Object(j.a)({},e),{},{projects:e.projects.filter((function(e){return e._id!==t.payload})),project:null});case J:return Object(j.a)(Object(j.a)({},e),{},{messagge:t.payload});default:return e}},ae=a(35),re=a.n(ae).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL}),ce=function(e){var t=Object(c.useReducer)(te,{projects:[],form:!1,errorform:!1,project:null,messagge:null}),a=Object(p.a)(t,2),n=a[0],s=a[1],o=function(){var e=Object(P.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.get("/api/projects");case 3:t=e.sent,s({type:D,payload:t.data.projects}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response),s({type:J,payload:{msg:"There was an error",category:"alerta-error"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(P.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.post("/api/projects",t);case 3:a=e.sent,console.log(a),s({type:L,payload:a.data}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response),s({type:J,payload:{msg:"There was an error",category:"alerta-error"}});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(P.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.delete("/api/projects/".concat(t));case 3:s({type:K,payload:t}),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.response),s({type:J,payload:{msg:"There was an error",category:"alerta-error"}});case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(h.Provider,{value:{projects:n.projects,form:n.form,errorform:n.errorform,project:n.project,messagge:n.messagge,showForm:function(){s({type:I})},getProjects:o,addProject:l,showError:function(e){s({type:F,payload:e})},actualProject:function(e){s({type:U,payload:e})},deleteProject:i},children:e.children})},ne=function(e,t){switch(t.type){case G:return Object(j.a)(Object(j.a)({},e),{},{projecttasks:t.payload});case Y:return Object(j.a)(Object(j.a)({},e),{},{projecttasks:[t.payload].concat(Object(A.a)(e.projecttasks))});case H:return Object(j.a)(Object(j.a)({},e),{},{errortask:t.payload});case M:return Object(j.a)(Object(j.a)({},e),{},{projecttasks:e.projecttasks.filter((function(e){return e._id!==t.payload}))});case W:return Object(j.a)(Object(j.a)({},e),{},{projecttasks:e.projecttasks.map((function(e){return e._id===t.payload._id?t.payload:e})),selectedtask:null});case B:return Object(j.a)(Object(j.a)({},e),{},{selectedtask:t.payload});default:return e}},se=function(e){var t=Object(c.useReducer)(ne,{projecttasks:[],errortask:!1,selectedtask:null}),a=Object(p.a)(t,2),n=a[0],s=a[1],o=function(){var e=Object(P.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.get("/api/tasks",{params:{projectId:t}});case 3:a=e.sent,s({type:G,payload:a.data.tasks}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(P.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.post("./api/tasks",t);case 3:a=e.sent,s({type:Y,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(P.a)(R.a.mark((function e(t,a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.delete("/api/tasks/".concat(t),{params:{projectId:a}});case 3:s({type:M,payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.response);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(P.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.put("/api/tasks/".concat(t._id),t);case 3:a=e.sent,s({type:W,payload:a.data.task}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(x.Provider,{value:{projecttasks:n.projecttasks,errortask:n.errortask,selectedtask:n.selectedtask,getTasks:o,addTask:l,validateTask:function(e){s({type:H,payload:e})},deleteTask:i,updateTask:u,saveActualTask:function(e){s({type:B,payload:e})}},children:e.children})},oe=function(e,t){switch(t.type){case V:return{alert:t.payload};case q:return{alert:null};default:return e}},le=function(e){var t=Object(c.useReducer)(oe,{alert:null}),a=Object(p.a)(t,2),n=a[0],s=a[1];return Object(r.jsx)(d.Provider,{value:{alert:n.alert,showAlert:function(e,t){s({type:V,payload:{msg:e,category:t}}),setTimeout((function(){s({type:q})}),5e3)}},children:e.children})},ie=function(e,t){switch(t.type){case Z:case z:return localStorage.setItem("token",t.payload.token),Object(j.a)(Object(j.a)({},e),{},{authenticate:!0,messagge:null,loading:!1});case X:return Object(j.a)(Object(j.a)({},e),{},{authenticate:!0,user:t.payload,loading:!1});case ee:case Q:case $:return localStorage.removeItem("token"),Object(j.a)(Object(j.a)({},e),{},{token:null,user:null,authenticate:null,messagge:t.payload,loading:!1});default:return e}},ue=function(e){e?re.defaults.headers.common["x-auth-token"]=e:delete re.defaults.headers.common["x-auth-token"]},je=function(e){var t={token:localStorage.getItem("token"),authenticate:null,user:null,messagge:null,loading:!0},a=Object(c.useReducer)(ie,t),n=Object(p.a)(a,2),s=n[0],o=n[1],l=function(){var e=Object(P.a)(R.a.mark((function e(t){var a,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.post("/api/users",t);case 3:a=e.sent,console.log(a.data),o({type:z,payload:a.data}),i(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},o({type:Q,payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(P.a)(R.a.mark((function e(){var t,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("token"))&&ue(t),e.prev=2,e.next=5,re.get("/api/auth");case 5:a=e.sent,o({type:X,payload:a.data.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:$});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(P.a)(R.a.mark((function e(t){var a,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.post("/api/auth",t);case 3:a=e.sent,o({type:Z,payload:a.data}),i(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},e.t0.response.data.msg||(r.msg=e.t0.response.data.errors[0].msg),o({type:$,payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(b.Provider,{value:{token:s.token,authenticate:s.authenticate,user:s.user,messagge:s.messagge,loading:s.loading,registerUser:l,authenticateUser:i,logIn:u,logOut:function(){o({type:ee})}},children:e.children})},pe=a(36),de=function(e){var t=e.component,a=Object(pe.a)(e,["component"]),n=Object(c.useContext)(b),s=n.authenticate,o=n.loading,l=n.authenticateUser;return Object(c.useEffect)((function(){l()}),[]),Object(r.jsx)(i.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return s||o?Object(r.jsx)(t,Object(j.a)({},e)):Object(r.jsx)(i.a,{to:"/"})}}))},be=localStorage.getItem("token");be&&ue(be);var me=function(){return Object(r.jsx)(ce,{children:Object(r.jsx)(se,{children:Object(r.jsx)(le,{children:Object(r.jsx)(je,{children:Object(r.jsx)(l.a,{children:Object(r.jsxs)(i.d,{children:[Object(r.jsx)(i.b,{exact:!0,path:"/",component:m}),Object(r.jsx)(i.b,{exact:!0,path:"/new-account",component:O}),Object(r.jsx)(de,{exact:!0,path:"/projects",component:_})]})})})})})})},Oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,72)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))};o.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(me,{})}),document.getElementById("root")),Oe()}},[[69,1,2]]]);
//# sourceMappingURL=main.c90d9bca.chunk.js.map